(this.webpackJsonptyperace=this.webpackJsonptyperace||[]).push([[0],{17:function(e,t,n){e.exports={box:"InputBox_box__2jwsb",label:"InputBox_label__2EUb9",label__error:"InputBox_label__error__1BmMv",inputBox:"InputBox_inputBox__13-oZ",inputBox__error:"InputBox_inputBox__error__3VcVX"}},20:function(e,t,n){e.exports={container:"LobbyUserItem_container__1kD2a",container__ready:"LobbyUserItem_container__ready__EJIrs",username:"LobbyUserItem_username__3jWRc",readyIcon:"LobbyUserItem_readyIcon__1ZTec"}},28:function(e,t,n){e.exports={page:"App_page__63Z8_"}},29:function(e,t,n){e.exports={header:"Header_header__1LeQS",logo:"Header_logo__euief"}},3:function(e,t,n){e.exports={container:"ProgressInfoContainer_container__2p144",top:"ProgressInfoContainer_top__2_a4m",bottom:"ProgressInfoContainer_bottom__3pSBV",textWrapperLeft:"ProgressInfoContainer_textWrapperLeft__16JKy",textWrapperCenter:"ProgressInfoContainer_textWrapperCenter__2imol",textWrapperRight:"ProgressInfoContainer_textWrapperRight__3jM_W",text:"ProgressInfoContainer_text__k4VoU",text__light:"ProgressInfoContainer_text__light__VhErc",space:"ProgressInfoContainer_space__31O1f",table:"ProgressInfoContainer_table__3uLuS"}},30:function(e,t,n){e.exports={container:"Container_container__3fVIS",container__small:"Container_container__small__2jWP6"}},31:function(e,t,n){e.exports={button:"Button_button__25LLe",button__small:"Button_button__small__1FKNm"}},32:function(e,t,n){e.exports={game:"Game_game__1p4Fi",playerSpace:"Game_playerSpace__3tt_o"}},4:function(e,t,n){e.exports={overlay:"WinPopup_overlay__TPYvR",container:"WinPopup_container__3gbwk",top:"WinPopup_top__2aGgB",icon:"WinPopup_icon__32pMy",winnerName:"WinPopup_winnerName__3jc7m",winnerSubtitle:"WinPopup_winnerSubtitle__3aVic",divider:"WinPopup_divider__1qT-J",mid:"WinPopup_mid__3Pr1Y",playerInfo:"WinPopup_playerInfo__3ucPg",playerRank:"WinPopup_playerRank__2LJjx",playerName:"WinPopup_playerName__UdG5E",textLight:"WinPopup_textLight__1WENg",bottom:"WinPopup_bottom__2E30N",wantsReplayIcon:"WinPopup_wantsReplayIcon__17aOc",alignRight:"WinPopup_alignRight__3notp"}},50:function(e,t,n){e.exports={spacer:"JoinLobby_spacer__2B2id"}},55:function(e,t,n){},6:function(e,t,n){e.exports={container:"Road_container__3bwUl",userInfoRow:"Road_userInfoRow__1Xprc",lightText:"Road_lightText__NvJoj",lighterText:"Road_lighterText__2o21I",roadContainer:"Road_roadContainer__2H0b6",userInfoRowSpacer:"Road_userInfoRowSpacer__3V1q-",road:"Road_road__49ZTC",useableRoad:"Road_useableRoad__ncx0I",flagIcon:"Road_flagIcon__1Uw4X",carBox:"Road_carBox__2Qhsw",carIcon:"Road_carIcon__299w1"}},9:function(e,t,n){e.exports={lobby:"Lobby_lobby__UFPAD",title:"Lobby_title__2TT7M",subtitle:"Lobby_subtitle__3x2gm",separator:"Lobby_separator__kQUti",users:"Lobby_users__3PT4U",cars:"Lobby_cars__8sQxf",car:"Lobby_car__2AECy",car__selected:"Lobby_car__selected__X0woP"}},90:function(e,t,n){"use strict";n.r(t);var a,s=n(1),c=n.n(s),r=n(48),o=n.n(r),i=(n(55),n(8)),l=n(49),_=n(28),j=n.n(_);!function(e){e.LOBBY_UPDATE="lobbyState",e.LOBBY_ERROR_INCORRECT_USERNAME="errorIncorrectUsername",e.LOBBY_ERROR_NOT_FOUND="errorLobbyNotFound",e.GAME_UPDATE="gameState",e.GAME_RESTART="restart"}(a||(a={}));var d,b=n(29),u=n.n(b),x=n.p+"static/media/twentyfivesoftware-logo.f2a26368.png",p=n(0),O=function(){return Object(p.jsx)("div",{className:u.a.header,children:Object(p.jsx)("img",{src:x,alt:"",className:u.a.logo})})},m=n(50),h=n.n(m);!function(e){e.LOBBY_JOIN="joinLobby",e.LOBBY_TOGGLE_READY="toggleReady",e.LOBBY_SWITCH_CAR="switchCar",e.GAME_UPDATE="gameUpdate",e.GAME_TOGGLE_PLAY_AGAIN="togglePlayAgain"}(d||(d={}));var f,g=n(30),v=n.n(g),N=function(e){var t=e.children,n=e.small,a=void 0!==n&&n;return Object(p.jsx)("section",{className:a?v.a.container__small:v.a.container,children:t})},y=n(17),R=n.n(y),I=function(e){var t=e.label,n=e.value,a=e.onChange,s=e.length,c=void 0===s?30:s,r=e.error,o=void 0!==r&&r;return Object(p.jsxs)("div",{className:R.a.box,children:[Object(p.jsx)("div",{className:o?R.a.label__error:R.a.label,children:t}),Object(p.jsx)("input",{type:"text",className:o?R.a.inputBox__error:R.a.inputBox,maxLength:c,value:n,onChange:function(e){return a(e.target.value)}})]})},B=n(31),E=n.n(B),L=function(e){var t=e.text,n=e.onClick,a=e.small,s=void 0!==a&&a;return Object(p.jsx)("div",{className:s?E.a.button__small:E.a.button,onClick:function(){return n()},children:t})},C=function(){var e=Object(s.useState)(""),t=Object(i.a)(e,2),n=t[0],c=t[1],r=Object(s.useState)(""),o=Object(i.a)(r,2),l=o[0],_=o[1],j=Object(s.useState)(!1),b=Object(i.a)(j,2),u=b[0],x=b[1],O=Object(s.useState)(!1),m=Object(i.a)(O,2),f=m[0],g=m[1],v=function(){return $.emit(d.LOBBY_JOIN,n,l)};return Object(s.useEffect)((function(){$.on(a.LOBBY_ERROR_INCORRECT_USERNAME,(function(){return x(!0)})),$.on(a.LOBBY_ERROR_NOT_FOUND,(function(){return g(!0)}))}),[]),Object(p.jsx)("div",{onKeyDown:function(e){return"Enter"===e.key?v():null},children:Object(p.jsxs)(N,{children:[Object(p.jsx)(I,{label:"USERNAME",value:n,onChange:function(e){u&&x(!1),c(e)},length:30,error:u}),Object(p.jsx)(I,{label:"LOBBY ID (EMPTY FOR NEW LOBBY)",value:l,onChange:function(e){f&&g(!1),_(e.toUpperCase())},length:5,error:f}),Object(p.jsx)("div",{className:h.a.spacer}),Object(p.jsx)(L,{text:0===l.length?"CREATE LOBBY":"JOIN",onClick:function(){return v()}})]})})},P=n(7),T=n(9),A=n.n(T),S=n(5),w=n(20),W=n.n(w),U=function(e){var t=e.username,n=e.isReady;return Object(p.jsxs)("div",{className:n?W.a.container__ready:W.a.container,children:[Object(p.jsx)("p",{className:W.a.username,children:t}),n&&Object(p.jsx)(P.a,{icon:S.d,className:W.a.readyIcon})]})},Y=[S.b,S.k,S.i,S.l,S.c,S.a,S.g,S.f,S.j],G=function(){var e,t,n,a=null!==(e=Object(s.useContext)(te))&&void 0!==e?e:{lobbyId:"",players:[]},c=a.lobbyId,r=a.players,o=null!==(t=null===(n=r.find((function(e){return e.socketId===$.id})))||void 0===n?void 0:n.carIndex)&&void 0!==t?t:0;return Object(p.jsxs)("div",{className:A.a.lobby,children:[Object(p.jsxs)(N,{children:[Object(p.jsx)("h1",{className:A.a.title,children:"LOBBY"}),Object(p.jsxs)("p",{className:A.a.subtitle,children:["ID: ",Object(p.jsx)("span",{children:c})]}),Object(p.jsx)("div",{className:A.a.separator}),Object(p.jsx)("ul",{className:A.a.users,children:r.map((function(e,t){return Object(p.jsx)(U,{username:e.username,isReady:e.isReady},t)}))}),Object(p.jsx)("div",{className:A.a.separator}),Object(p.jsx)(L,{text:"READY",onClick:function(){return $.emit(d.LOBBY_TOGGLE_READY)}})]}),Object(p.jsx)(N,{small:!0,children:Object(p.jsx)("div",{className:A.a.cars,children:Y.map((function(e,t){return Object(p.jsx)("div",{className:t===o?A.a.car__selected:A.a.car,onClick:function(){return $.emit(d.LOBBY_SWITCH_CAR,t)},children:Object(p.jsx)(P.a,{icon:e})},t)}))})})]})},k=n(32),M=n.n(k),D=n(3),F=n.n(D),J=function(e){var t,n=e.currentTextPosition,a=null!==(t=Object(s.useContext)(ee))&&void 0!==t?t:{text:"",players:[],gameStartTime:0},c=a.text,r=a.players,o=a.gameStartTime,i=r.find((function(e){return e.socketId===$.id}));if(!i)return Object(p.jsx)(p.Fragment,{});var l=Math.floor(((i.isFinished?i.finishTime:Date.now())-o)/1e3);return Object(p.jsxs)("section",{className:F.a.container,children:[Object(p.jsx)("div",{className:F.a.top,children:Object(p.jsxs)("div",{className:F.a.table,children:[Object(p.jsx)("span",{className:F.a.text__light,children:Object(p.jsx)("div",{children:c.substring(0,n)})}),Object(p.jsx)("span",{className:F.a.text,children:c[n]}),Object(p.jsx)("span",{className:F.a.text,children:c.substring(n+1)})]})}),Object(p.jsxs)("div",{className:F.a.bottom,children:[Object(p.jsxs)("div",{children:[Object(p.jsx)("span",{className:F.a.text,children:i.typingSpeed}),Object(p.jsx)("span",{className:F.a.text__light,children:" K/min"})]}),Object(p.jsxs)("div",{children:[Object(p.jsx)("span",{className:F.a.text,children:n}),Object(p.jsx)("span",{className:F.a.text__light,children:"/"}),Object(p.jsx)("span",{className:F.a.text,children:c.length}),Object(p.jsx)("span",{className:F.a.text__light,children:" letters typed"})]}),Object(p.jsxs)("div",{children:[Object(p.jsx)("span",{className:F.a.text,children:Math.floor(100*n/c.length)}),Object(p.jsx)("span",{className:F.a.text__light,children:"% completed"})]}),Object(p.jsxs)("div",{children:[Object(p.jsx)("span",{className:F.a.text,children:l<0?0:l}),Object(p.jsx)("span",{className:F.a.text__light,children:"s passed"})]})]})]})},V=n(6),H=n.n(V),K=function(e){var t=e.username,n=e.speed,a=e.progress,s=e.color,c=e.carIndex;return Object(p.jsxs)("section",{className:H.a.container,children:[Object(p.jsxs)("div",{className:H.a.userInfoRow,children:[Object(p.jsx)("p",{className:H.a.lightText,children:t}),Object(p.jsx)("div",{className:H.a.userInfoRowSpacer,children:Object(p.jsx)("p",{children:" \xb7 "})}),Object(p.jsxs)("p",{className:H.a.lightText,children:["".concat(n," "),Object(p.jsx)("span",{className:H.a.lighterText,children:"K/min"})]})]}),Object(p.jsxs)("div",{className:H.a.roadContainer,children:[Object(p.jsx)("div",{className:H.a.road,children:Object(p.jsx)("div",{className:H.a.useableRoad,children:Object(p.jsx)("div",{style:{marginLeft:"".concat(a,"%"),marginBottom:10},className:H.a.carBox,children:Object(p.jsx)(P.a,{icon:Y[c],style:{color:s},className:H.a.carIcon})})})}),Object(p.jsx)("div",{children:Object(p.jsx)(P.a,{icon:S.e,style:{color:100===a?s:"#505050"},className:H.a.flagIcon})})]})]})},Q=n(4),X=n.n(Q),Z=function(){var e,t=Object(s.useContext)(ee),n=(null!==(e=null===t||void 0===t?void 0:t.players)&&void 0!==e?e:[]).sort((function(e,t){return e.finishTime>t.finishTime?1:-1}));return 0===n.length?Object(p.jsx)(p.Fragment,{}):Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)("div",{className:X.a.overlay}),Object(p.jsxs)("div",{className:X.a.container,children:[Object(p.jsxs)("div",{className:X.a.top,children:[Object(p.jsx)(P.a,{icon:S.h,className:X.a.icon}),Object(p.jsx)("div",{className:X.a.winnerName,children:n[0].username}),Object(p.jsx)("div",{className:X.a.winnerSubtitle,children:"WON THE GAME"})]}),Object(p.jsx)("div",{className:X.a.divider}),Object(p.jsx)("table",{className:X.a.mid,children:n.map((function(e,a){var s;return Object(p.jsxs)("tr",{className:X.a.playerInfo,children:[Object(p.jsxs)("td",{className:X.a.playerRank,children:["#",a+1]}),Object(p.jsx)("td",{className:X.a.playerName,children:e.username}),Object(p.jsxs)("td",{className:X.a.alignRight,children:[Math.floor((e.finishTime-(null!==(s=null===t||void 0===t?void 0:t.gameStartTime)&&void 0!==s?s:0))/1e3),Object(p.jsx)("span",{className:X.a.textLight,children:"s"})]}),Object(p.jsxs)("td",{className:X.a.alignRight,children:[e.typingSpeed," ",Object(p.jsx)("span",{className:X.a.textLight,children:"K/min"})]}),n.some((function(e){return e.playAgain}))&&Object(p.jsx)("td",{children:e.playAgain&&Object(p.jsx)(P.a,{icon:S.m,className:X.a.wantsReplayIcon})})]},a)}))}),Object(p.jsx)("div",{className:X.a.bottom,children:Object(p.jsx)(L,{text:"PLAY AGAIN",small:!0,onClick:function(){return $.emit(d.GAME_TOGGLE_PLAY_AGAIN)}})})]})]})},q=["#74B9FF","#83A868","#FCAC6F","#DF4A70","#BE9CFC"],z=function(){var e=Object(s.useState)(0),t=Object(i.a)(e,2),n=t[0],c=t[1],r=Object(s.useContext)(ee);return Object(s.useEffect)((function(){var e=function(e){(null===r||void 0===r?void 0:r.text[n])===e.key&&(c(n+1),$.emit(d.GAME_UPDATE,n+1))};return window.addEventListener("keydown",e),$.on(a.GAME_RESTART,(function(){return c(0)})),function(){window.removeEventListener("keydown",e)}}),[n,null===r||void 0===r?void 0:r.text]),Object(p.jsxs)("div",{className:M.a.game,children:[Object(p.jsx)("div",{className:M.a.playerSpace,children:null===r||void 0===r?void 0:r.players.map((function(e,t){return Object(p.jsx)(K,{username:e.username,speed:e.typingSpeed,progress:Math.floor(100*e.currentTextPosition/r.text.length),color:q[t%q.length],carIndex:e.carIndex},t)}))}),Object(p.jsx)("div",{children:Object(p.jsx)(J,{currentTextPosition:n})}),(null===r||void 0===r?void 0:r.isFinished)&&Object(p.jsx)(Z,{})]})},$=Object(l.io)(null!==(f="https://typerace-server.herokuapp.com")?f:""),ee=Object(s.createContext)(null),te=Object(s.createContext)(null),ne=function(){var e=Object(s.useState)(null),t=Object(i.a)(e,2),n=t[0],c=t[1],r=Object(s.useState)(null),o=Object(i.a)(r,2),l=o[0],_=o[1];return Object(s.useEffect)((function(){$.on(a.LOBBY_UPDATE,(function(e){return c(e)})),$.on(a.GAME_UPDATE,(function(e){return _(e)}))}),[]),console.log(l),l?Object(p.jsxs)("div",{className:j.a.page,children:[Object(p.jsx)(O,{}),Object(p.jsx)(ee.Provider,{value:l,children:Object(p.jsx)(z,{})})]}):Object(p.jsxs)("div",{className:j.a.page,children:[Object(p.jsx)(O,{}),!n&&Object(p.jsx)(C,{}),n&&Object(p.jsx)(te.Provider,{value:n,children:Object(p.jsx)(G,{})})]})};o.a.render(Object(p.jsx)(c.a.StrictMode,{children:Object(p.jsx)(ne,{})}),document.getElementById("root"))}},[[90,1,2]]]);
//# sourceMappingURL=main.ee09bf91.chunk.js.map